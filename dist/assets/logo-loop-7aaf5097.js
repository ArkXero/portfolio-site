import{r as o,j as m}from"./index-74fe2978.js";const x={SMOOTH_TAU:.25,MIN_COPIES:2,COPY_HEADROOM:2},B=e=>typeof e=="number"?`${e}px`:e??void 0,U=(e,c,r)=>{o.useEffect(()=>{let n;if(!window.ResizeObserver){const t=()=>{clearTimeout(n),n=setTimeout(e,100)};return window.addEventListener("resize",t),e(),()=>{clearTimeout(n),window.removeEventListener("resize",t)}}const l=c.map(t=>{if(!t.current)return null;const s=new ResizeObserver(()=>{clearTimeout(n),n=setTimeout(e,100)});return s.observe(t.current),s});return e(),()=>{clearTimeout(n),l.forEach(t=>t==null?void 0:t.disconnect())}},r)},Y=(e,c,r)=>{o.useEffect(()=>{var s;const n=((s=e.current)==null?void 0:s.querySelectorAll("img"))??[];if(n.length===0){c();return}let l=n.length;const t=()=>{l-=1,l===0&&c()};return n.forEach(a=>{const i=a;i.complete?t():(i.addEventListener("load",t,{once:!0}),i.addEventListener("error",t,{once:!0}))}),()=>{n.forEach(a=>{a.removeEventListener("load",t),a.removeEventListener("error",t)})}},r)},G=(e,c,r,n,l)=>{const t=o.useRef(null),s=o.useRef(null),a=o.useRef(0),i=o.useRef(0);o.useEffect(()=>{const g=e.current;if(!g)return;r>0&&(a.current=(a.current%r+r)%r,g.style.transform=`translate3d(${-a.current}px, 0, 0)`);const E=h=>{s.current===null&&(s.current=h);const M=Math.max(0,Math.min(h-s.current,100))/1e3;s.current=h;const L=l&&n?0:c,R=1-Math.exp(-M/x.SMOOTH_TAU);if(i.current+=(L-i.current)*R,r>0){let f=a.current+i.current*M;f=(f%r+r)%r,a.current=f;const N=-a.current;g.style.transform=`translate3d(${N}px, 0, 0)`}t.current=requestAnimationFrame(E)};return t.current=requestAnimationFrame(E),()=>{t.current!==null&&(cancelAnimationFrame(t.current),t.current=null),s.current=null}},[c,r,n,l,e])},I=o.memo(({item:e,itemKey:c})=>{const r="node"in e,n=r?m.jsx("span",{className:"logoloop__node","aria-hidden":!!e.href&&!e.ariaLabel,children:e.node}):m.jsx("img",{src:e.src,srcSet:e.srcSet,sizes:e.sizes,width:e.width,height:e.height,alt:e.alt??"",title:e.title,loading:"lazy",decoding:"async",draggable:!1}),l=r?e.ariaLabel??e.title:e.alt??e.title,t=e.href?m.jsx("a",{className:"logoloop__link",href:e.href,"aria-label":l||"logo link",target:"_blank",rel:"noreferrer noopener",children:n}):n;return m.jsx("li",{className:"logoloop__item",role:"listitem",children:t},c)});I.displayName="LogoItem";const K=o.memo(({logos:e,speed:c=120,direction:r="left",width:n="100%",logoHeight:l=28,gap:t=32,pauseOnHover:s=!0,fadeOut:a=!1,fadeOutColor:i,scaleOnHover:g=!1,ariaLabel:E="Partner logos",className:h,style:M})=>{const L=o.useRef(null),R=o.useRef(null),f=o.useRef(null),[N,j]=o.useState(0),[C,y]=o.useState(x.MIN_COPIES),[w,T]=o.useState(!1),z=o.useMemo(()=>{const _=Math.abs(c),u=r==="left"?1:-1,p=c<0?-1:1;return _*u*p},[c,r]),A=o.useCallback(()=>{var p,d,b,v;const _=((p=L.current)==null?void 0:p.clientWidth)??0,u=((v=(b=(d=f.current)==null?void 0:d.getBoundingClientRect)==null?void 0:b.call(d))==null?void 0:v.width)??0;if(u>0){j(Math.ceil(u));const D=Math.ceil(_/u)+x.COPY_HEADROOM;y(Math.max(x.MIN_COPIES,D))}},[]);U(A,[L,f],[e,t,l]),Y(f,A,[e,t,l]),G(R,z,N,w,s);const S=o.useMemo(()=>({"--logoloop-gap":`${t}px`,"--logoloop-logoHeight":`${l}px`,...i&&{"--logoloop-fadeColor":i}}),[t,l,i]),O=o.useMemo(()=>["logoloop",a&&"logoloop--fade",g&&"logoloop--scale-hover",h].filter(Boolean).join(" "),[a,g,h]),$=o.useCallback(()=>{s&&T(!0)},[s]),P=o.useCallback(()=>{s&&T(!1)},[s]),k=o.useMemo(()=>Array.from({length:C},(_,u)=>m.jsx("ul",{className:"logoloop__list",role:"list","aria-hidden":u>0,ref:u===0?f:void 0,children:e.map((p,d)=>m.jsx(I,{item:p,itemKey:`${u}-${d}`},`${u}-${d}`))},`copy-${u}`)),[C,e]),F=o.useMemo(()=>({width:B(n)??"100%",...S,...M}),[n,S,M]);return m.jsx("div",{ref:L,className:O,style:F,role:"region","aria-label":E,onMouseEnter:$,onMouseLeave:P,children:m.jsx("div",{className:"logoloop__track",ref:R,children:k})})});K.displayName="LogoLoop";export{K as LogoLoop,K as default};
